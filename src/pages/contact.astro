---
// Astro
import BaseLayout from "../layouts/BaseLayout.astro";

// Third-party
import { Icon } from "astro-icon/components";

// Internal Components
import MultiStepForm from "../components/ui/MultiStepForm.astro";
import PageContainer from "../components/layouts/PageContainer.astro";
import ContentWrapper from "../components/layouts/ContentWrapper.astro";
import Button from "../components/ui/Button.astro";
import Card from "../components/ui/Card.astro";

// Data
import { siteData } from "../data/config/site";
import { contactContent } from "../data/content/contact";
import { commonText } from "../data/content/shared/common";

// Utils
import { getBaseUrl, createUrl } from "../utils/url";
---

<BaseLayout
  title="Contact Us - Get Started with Data Analytics | AUXO Data Labs"
  description="Start a strategic conversation. Share your analytics objectives, and a senior member of our team will respond within 24 hours. No sales pitches, just professional dialogue focused on your goals."
>
  <PageContainer
    maxWidth="7xl"
    paddingTop="pt-12 sm:pt-20 md:pt-24"
    paddingBottom="pb-12 sm:pb-16"
  >
    <!-- Header -->
    <ContentWrapper maxWidth="3xl" class="text-center mb-12 sm:mb-16">
      <h1
        class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-extrabold mb-8 text-primary transition-colors leading-[1.1] tracking-tight"
        style="font-family: var(--font-display);"
      >
        {contactContent.hero.title} <span class="text-gradient-green block mt-2">{contactContent.hero.titleHighlight}</span>
      </h1>
      <p
        class="text-lg sm:text-xl md:text-2xl text-secondary max-w-4xl mx-auto leading-relaxed transition-colors font-normal mb-8"
        style="font-family: var(--font-body);"
      >
        {contactContent.hero.subtitle}
      </p>
    </ContentWrapper>

    <!-- Two Column Layout -->
    <ContentWrapper
      maxWidth="7xl"
      class="grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8 md:gap-10 lg:gap-12 mb-16 sm:mb-20"
    >
      <!-- Contact Information Column -->
      <div class="lg:col-span-1 mb-4 lg:mb-0 order-2 lg:order-1">
        <div class="lg:sticky lg:top-24">
          <div class="space-y-4 sm:space-y-6">
            <!-- Email -->
            <div class="flex items-start space-x-4">
              <div
                class="w-10 h-10 bg-accent-green/10 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors"
              >
                <Icon
                  name="mdi:email"
                  class="w-5 h-5 text-accent-green transition-colors"
                />
              </div>
              <div>
                <h3 class="font-semibold mb-1 text-primary transition-colors">
                  {commonText.labels.email}
                </h3>
                <a
                  href={`mailto:${siteData.email}`}
                  class="text-secondary hover:text-accent-green transition-colors"
                >
                  {siteData.email}
                </a>
              </div>
            </div>

            <!-- Phone -->
            {
              siteData.phone && (
                <div class="flex items-start space-x-4">
                  <div class="w-10 h-10 bg-accent-green/10 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors">
                    <Icon
                      name="mdi:phone"
                      class="w-5 h-5 text-accent-green transition-colors"
                    />
                  </div>
                  <div>
                    <h3 class="font-semibold mb-1 text-primary transition-colors">
                      {commonText.labels.phone}
                    </h3>
                    <a
                      href={`tel:${siteData.phone}`}
                      class="text-secondary hover:text-accent-green transition-colors"
                    >
                      {siteData.phone}
                    </a>
                  </div>
                </div>
              )
            }

            <!-- Location -->
            <div class="flex items-start space-x-4">
              <div
                class="w-10 h-10 bg-accent-green/10 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors"
              >
                <Icon
                  name="mdi:map-marker"
                  class="w-5 h-5 text-accent-green transition-colors"
                />
              </div>
              <div>
                <h3 class="font-semibold mb-1 text-primary transition-colors">
                  {commonText.labels.location}
                </h3>
                <p class="text-secondary transition-colors">
                  {siteData.address.city}<br />
                  {siteData.address.country}
                </p>
              </div>
            </div>

            <!-- Social -->
            <div class="flex items-start space-x-4">
              <div
                class="w-10 h-10 bg-accent-green/10 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors"
              >
                <Icon
                  name="mdi:share-variant"
                  class="w-5 h-5 text-accent-green transition-colors"
                />
              </div>
              <div>
                <h3 class="font-semibold mb-2 text-primary transition-colors">
                  {commonText.labels.followUs}
                </h3>
                <div class="flex gap-3">
                  <a
                    href={siteData.social.linkedin}
                    class="w-8 h-8 bg-surface rounded-lg flex items-center justify-center hover:bg-accent-green hover:text-on-accent transition-colors touch-target-manipulation"
                  >
                    <Icon name="mdi:linkedin" class="w-4 h-4" />
                  </a>
                  <a
                    href={siteData.social.twitter}
                    class="w-8 h-8 bg-surface rounded-lg flex items-center justify-center hover:bg-accent-green hover:text-on-accent transition-colors touch-target-manipulation"
                  >
                    <Icon name="mdi:twitter" class="w-4 h-4" />
                  </a>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Links Section - Hidden on mobile, shown on tablet+ -->
          <div
            class="hidden sm:block mt-4 sm:mt-6 lg:mt-8 p-4 sm:p-6 bg-card border border-theme rounded-lg"
          >
            <h3
              class="font-bold mb-3 sm:mb-4 text-sm sm:text-base md:text-lg text-primary transition-colors"
            >
              {contactContent.sidebar.quickLinks.title}
            </h3>
            <div class="space-y-2 sm:space-y-3">
              {contactContent.sidebar.quickLinks.links.map((link) => (
                <a
                  href={createUrl(link.href)}
                  class="flex items-center gap-2 sm:gap-3 text-xs sm:text-sm text-secondary hover:text-accent-green transition-colors group min-h-[44px] active:text-accent-green"
                >
                  <Icon
                    name={link.icon}
                    class="w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"
                  />
                  <span class="group-hover:underline">{link.text}</span>
                </a>
              ))}
            </div>
          </div>
        </div>
      </div>

      <!-- Form Column -->
      <div class="lg:col-span-2 space-y-4 sm:space-y-6 order-1 lg:order-2">
        <!-- What to Expect Section -->
        <div
          class="bg-accent-green/10 border border-accent-green/30 rounded-xl p-4 sm:p-6 md:p-8 mb-6"
        >
          <div class="flex items-start gap-3 sm:gap-4 mb-3 sm:mb-4">
            <div
              class="flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 bg-accent-green/20 rounded-lg flex items-center justify-center"
            >
              <Icon
                name="mdi:check-circle"
                class="w-5 h-5 sm:w-6 sm:h-6 text-accent-green"
              />
            </div>
            <div class="flex-1">
              <h3
                class="text-lg sm:text-xl font-bold mb-2 sm:mb-3 text-primary transition-colors"
              >
                {contactContent.hero.consultation.title}
              </h3>
              <ul class="space-y-1.5 sm:space-y-2">
                {contactContent.hero.consultation.benefits.map((benefit) => (
                  <li class="flex items-start gap-2">
                    <Icon
                      name="mdi:check"
                      class="w-4 h-4 sm:w-5 sm:h-5 text-accent-green flex-shrink-0 mt-0.5"
                    />
                    <span
                      class="text-xs sm:text-sm text-secondary transition-colors"
                    >
                      {benefit}
                    </span>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        </div>

        <!-- Form -->
        <div
          class="bg-card/50 border border-theme rounded-2xl p-4 sm:p-6 md:p-8 transition-colors"
        >
          <MultiStepForm />
        </div>

        <!-- Privacy Note -->
        <div class="text-center">
          <p
            class="text-xs text-secondary flex items-center justify-center gap-1.5 sm:gap-2 transition-colors"
          >
            <Icon
              name="mdi:shield-check"
              class="w-3 h-3 sm:w-4 sm:h-4 text-accent-green"
            />
            <span>{contactContent.privacy.text}</span>
          </p>
        </div>

        <!-- What Happens Next Section -->
        <div class="bg-card border-2 border-theme rounded-xl p-4 sm:p-6 md:p-8 mb-6">
          <h3
            class="text-lg sm:text-xl font-bold mb-4 sm:mb-6 text-primary transition-colors flex items-center gap-1.5 sm:gap-2"
          >
            <Icon
              name="mdi:arrow-right"
              class="w-5 h-5 sm:w-6 sm:h-6 text-accent-green"
            />
            {contactContent.whatHappensNext.title}
          </h3>

          {/* Two Column Grid Layout */}
          <div
            class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-5 md:gap-6 mb-4 sm:mb-6"
          >
            {contactContent.whatHappensNext.steps.map((step) => (
              <div class="relative flex items-start gap-3 sm:gap-4">
                <div
                  class="flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 bg-accent-green rounded-full flex items-center justify-center font-bold text-sm sm:text-base md:text-lg border-2 border-accent-green shadow-md shadow-accent-green/20 text-on-accent"
                >
                  {step.number}
                </div>
                <div class="flex-1 min-w-0">
                  <div
                    class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-2.5 mb-1.5 sm:mb-2"
                  >
                    <h4
                      class="text-sm sm:text-base font-semibold text-primary transition-colors whitespace-nowrap"
                    >
                      {step.title}
                    </h4>
                    <span
                      class="text-[0.65rem] sm:text-xs text-accent-green font-medium whitespace-nowrap"
                    >
                      â€¢ {step.timeframe}
                    </span>
                  </div>
                  <p
                    class="text-[0.7rem] sm:text-xs text-secondary/80 transition-colors leading-relaxed"
                  >
                    {step.description}
                  </p>
                </div>
              </div>
            ))}
          </div>

          {/* What to Prepare Checklist */}
          <div
            class="bg-accent-green/5 border border-accent-green rounded-lg p-3 sm:p-4 md:p-5"
          >
            <h4
              class="text-sm sm:text-base font-semibold mb-2 sm:mb-3 text-primary transition-colors flex items-center"
            >
              <Icon
                name="mdi:check-circle"
                class="w-4 h-4 sm:w-5 sm:h-5 mr-1.5 sm:mr-2 text-accent-green"
              />
              {contactContent.whatHappensNext.prepare.title}
            </h4>
            <ul
              class="space-y-1.5 sm:space-y-2 text-xs sm:text-sm text-secondary transition-colors"
            >
              {contactContent.whatHappensNext.prepare.items.map((item) => (
                <li class="flex items-start">
                  <Icon
                    name="mdi:check"
                    class="w-3 h-3 sm:w-4 sm:h-4 text-accent-green mr-1.5 sm:mr-2 flex-shrink-0 mt-0.5"
                  />
                  <span>{item}</span>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </div>
    </ContentWrapper>

    <!-- Additional Contact Options -->
    <ContentWrapper maxWidth="4xl" class="mb-16 sm:mb-20">
      <div class="text-center mb-6 sm:mb-8">
        <h2
          class="text-xl sm:text-2xl font-bold mb-1.5 sm:mb-2 text-primary transition-colors"
        >
          {contactContent.additionalOptions.title}
        </h2>
        <p class="text-sm sm:text-base text-secondary transition-colors">
          {contactContent.additionalOptions.subtitle}
        </p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6">
        {
          contactContent.additionalOptions.options.map((option) => (
            <Card
              interactive
              hoverEffect
              accentBorder
              padding="md"
              class="text-center group flex flex-col"
            >
              <div class="w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 bg-accent-green/10 rounded-full flex items-center justify-center mx-auto mb-3 sm:mb-4 group-hover:bg-accent-green/20 transition-colors">
                <Icon
                  name={option.icon}
                  class="w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 text-accent-green transition-colors"
                />
              </div>
              <h3 class="font-bold mb-1.5 sm:mb-2 text-base sm:text-lg text-primary transition-colors">
                {option.title}
              </h3>
              <p class="text-xs sm:text-sm text-secondary mb-4 sm:mb-6 transition-colors flex-grow">
                {option.description}
              </p>
              {option.action.type === "button" ? (
                <Button
                  variant="primary"
                  id={option.action.id}
                  class="w-full mt-auto"
                >
                  {option.action.text}
                </Button>
              ) : option.action.href === "brochure.pdf" ? (
                <Button
                  variant="primary"
                  href={option.action.href && (option.action.href.startsWith('http') || option.action.href.endsWith('.pdf')) ? `${getBaseUrl()}${option.action.href}` : option.action.href ? createUrl(option.action.href) : '#'}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="w-full mt-auto"
                >
                  {option.action.text}
                </Button>
              ) : (
                <Button
                  variant="primary"
                  href={option.action.href ? createUrl(option.action.href) : '#'}
                  class="w-full mt-auto"
                >
                  {option.action.text}
                </Button>
              )}
            </Card>
          ))
        }
      </div>
    </ContentWrapper>

    <!-- Trust Indicators -->
    <ContentWrapper maxWidth="4xl" class="mb-16 sm:mb-20">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
        {contactContent.trustIndicators.map((indicator) => (
          <div
            class="bg-accent-green/10 border-2 border-accent-green/30 rounded-xl p-4 sm:p-6 text-center"
          >
            <Icon
              name={indicator.icon}
              class="w-10 h-10 sm:w-12 sm:h-12 text-accent-green mx-auto mb-2 sm:mb-3"
            />
            <h3
              class="font-bold mb-1.5 sm:mb-2 text-sm sm:text-base text-primary transition-colors"
            >
              {indicator.title}
            </h3>
            <p class="text-xs sm:text-sm text-secondary transition-colors">
              {indicator.description}
            </p>
          </div>
        ))}
      </div>
    </ContentWrapper>
  </PageContainer>
</BaseLayout>

<script is:inline define:vars={{ email: siteData.email }}>
  // Schedule call button handler
  const scheduleBtn = document.getElementById("schedule-btn");

  scheduleBtn?.addEventListener("click", () => {
    // TODO: Replace with actual Calendly link or booking system
    const calendlyURL = "https://calendly.com/auxodata"; // Placeholder - unused for now
    void calendlyURL; // Suppress unused variable warning

    // For now, show alert to configure
    const proceed = confirm(
      "Scheduling system not configured.\n\nWould you like to contact us via email instead?",
    );
    if (proceed) {
      window.location.href =
        `mailto:${email}?subject=Schedule a Consultation`;
    }
  });
</script>
