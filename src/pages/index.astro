---
import BaseLayout from "../layouts/BaseLayout.astro";
import Navigation from "../components/Navigation.astro";
import { siteData } from "../data/config/site";

// Section Components
import HeroSection from "../components/sections/HeroSection.astro";
import ServicesSection from "../components/sections/ServicesSection.astro";
import StartupAdvantages from "../components/sections/StartupAdvantages.astro";
import MethodologySection from "../components/sections/MethodologySection.astro";
import QuickDecisionBoxes from "../components/sections/QuickDecisionBoxes.astro";
import WhyChooseSection from "../components/sections/WhyChooseSection.astro";
import MaturityCalculatorSection from "../components/sections/MaturityCalculatorSection.astro";
import BlogPreview from "../components/sections/BlogPreview.astro";
import FinalCtaSection from "../components/sections/FinalCtaSection.astro";
import { homepageContent } from "../data/content/homepage";

// Styles and Scripts
import "../styles/homepage.css";
---

<BaseLayout
  title="Data Analytics Consultancy Dubai, UAE | AUXO Data Labs"
  description={siteData.description}
  showNav={false}
  showParticles={true}
>
  <Navigation />

  <HeroSection />

  <ServicesSection />

  <StartupAdvantages
    advantages={homepageContent.startupAdvantages.advantages}
  />

  <MethodologySection />

  <!-- Quick Decision Boxes Section -->
  <section class="py-12 sm:py-16 md:py-20 bg-primary">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-10 sm:mb-12">
        <h2
          class="text-2xl sm:text-3xl md:text-4xl font-bold mb-3 text-primary transition-colors"
        >
          At a Glance
        </h2>
        <p
          class="text-base sm:text-lg text-secondary max-w-2xl mx-auto transition-colors"
        >
          Key information to help you make quick decisions
        </p>
      </div>
      <QuickDecisionBoxes
        cards={[
          {
            icon: "mdi:clock",
            value: "2-4 Weeks",
            label: "Time to First Insights",
            description:
              "Get actionable insights faster than traditional consultancies",
          },
          {
            icon: "mdi:account-group",
            value: "Direct",
            label: "Founder Access",
            description:
              "Work directly with founders, no junior consultants or account managers",
          },
          {
            icon: "mdi:calendar-clock",
            value: "Minimal",
            label: "Your Involvement",
            description:
              "We respect your time. Only essential touchpoints, clear communication",
          },
          {
            icon: "mdi:shield-check",
            value: "Transparent",
            label: "Pricing & Process",
            description:
              "No hidden costs. Clear pricing upfront. 100% transparent process from day one",
          },
        ]}
      />
    </div>
  </section>

  <MaturityCalculatorSection />

  <BlogPreview />

  <FinalCtaSection />

  <script>
    // Setup homepage animations
    function setupHomepageAnimations() {
      // Run hero animation
      function runHeroAnimation() {
        const heroSection = document.getElementById("hero");
        if (!heroSection) return;
        heroSection.classList.remove("hero-animate");
        heroSection.classList.add("hero-animation-reset");
        void heroSection.offsetWidth;
        heroSection.classList.remove("hero-animation-reset");
        heroSection.classList.add("hero-animate");
      }

      // Setup intersection observer
      function setupIntersectionObserver() {
        const prefersReducedMotion = window.matchMedia(
          "(prefers-reduced-motion: reduce)",
        ).matches;

        if (prefersReducedMotion) {
          document.querySelectorAll(".animate-fade-in").forEach((el) => {
            (el as HTMLElement).style.opacity = "1";
          });
          return;
        }

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                const element = entry.target as HTMLElement;
                element.style.opacity = "1";
                const delay = element.getAttribute("data-animation-delay");
                if (delay) {
                  element.style.animationDelay = `${delay}ms`;
                }
                observer.unobserve(element);
              }
            });
          },
          {
            threshold: 0.1,
            rootMargin: "0px 0px -50px 0px",
          },
        );

        document.querySelectorAll(".animate-fade-in").forEach((el) => {
          observer.observe(el);
        });
      }

      runHeroAnimation();
      setupIntersectionObserver();
    }

    // Initialize
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", setupHomepageAnimations);
    } else {
      setupHomepageAnimations();
    }

    document.addEventListener("astro:page-load", setupHomepageAnimations);
  </script>
</BaseLayout>
