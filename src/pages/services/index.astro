---
import BaseLayout from "../../layouts/BaseLayout.astro";
import FAQSchema from "../../components/FAQSchema.astro";
import PageContainer from "../../components/layouts/PageContainer.astro";
import SectionContainer from "../../components/layouts/SectionContainer.astro";
import ServicesHero from "../../components/sections/ServicesHero.astro";
import ServiceGrid from "../../components/sections/ServiceGrid.astro";
import BusinessImpact from "../../components/sections/BusinessImpact.astro";
import { services } from "../../data/collections/services";
import { servicesPageContent } from "../../data/content/services";
import { Icon } from "astro-icon/components";

const base = import.meta.env.BASE_URL;

// Transform business impacts into display format with icons
const getImpactIcon = (impact: string): string => {
  const lowerImpact = impact.toLowerCase();
  if (lowerImpact.includes("decision") || lowerImpact.includes("insight"))
    return "mdi:target";
  if (
    lowerImpact.includes("time") ||
    lowerImpact.includes("reduce") ||
    lowerImpact.includes("efficiency")
  )
    return "mdi:clock";
  if (
    lowerImpact.includes("roi") ||
    lowerImpact.includes("cost") ||
    lowerImpact.includes("margin")
  )
    return "mdi:trending-up";
  if (
    lowerImpact.includes("compliance") ||
    lowerImpact.includes("risk") ||
    lowerImpact.includes("security")
  )
    return "mdi:shield-check";
  if (
    lowerImpact.includes("predict") ||
    lowerImpact.includes("forecast") ||
    lowerImpact.includes("trend")
  )
    return "mdi:chart-line";
  if (lowerImpact.includes("automate") || lowerImpact.includes("optimize"))
    return "mdi:lightning-bolt";
  if (lowerImpact.includes("growth") || lowerImpact.includes("opportunity"))
    return "mdi:rocket";
  if (
    lowerImpact.includes("quality") ||
    lowerImpact.includes("trust") ||
    lowerImpact.includes("confidence")
  )
    return "mdi:trophy";
  return "mdi:star"; // Default icon
};

// Extract unique business impacts from all services
const allBusinessImpacts = services
  .filter(
    (service) => service.businessImpact && service.businessImpact.length > 0,
  )
  .flatMap((service) => service.businessImpact!)
  .filter((impact, index, self) => self.indexOf(impact) === index) // Remove duplicates
  .slice(0, 8) // Limit to top 8 for display
  .map((impact) => ({
    icon: getImpactIcon(impact),
    title: impact,
  }));

// FAQ data for structured data
const servicesFAQs = [
  {
    question: "What data analytics services does AUXO Data Labs offer?",
    answer:
      "AUXO Data Labs offers six core services: Business Intelligence & Reporting, Advanced Data Analytics (Predictive Analytics), Data Strategy & Consulting, Data Engineering & Infrastructure, Machine Learning & AI Solutions, and Data Governance & Quality. Each service is tailored to help organizations transform data into actionable insights.",
  },
  {
    question:
      "How do I choose the right data analytics service for my business?",
    answer:
      "The right service depends on your current data maturity, business objectives, and specific challenges. We recommend starting with our free Data Maturity Assessment to understand your current capabilities, or contact us for a consultation where we'll assess your needs and recommend the most appropriate solution.",
  },
  {
    question: "Do you work with businesses of all sizes?",
    answer:
      "Yes, we work with organizations of all sizes across various industries in the UAE and beyond. Our services are scalable and can be customized to fit your organization's size, budget, and specific requirements.",
  },
  {
    question: "What industries do you specialize in?",
    answer:
      "We serve clients across multiple industries including retail, healthcare, finance, logistics, manufacturing, and professional services. Our team has experience adapting data analytics solutions to meet the unique challenges and requirements of different sectors.",
  },
  {
    question: "How long does a typical data analytics project take?",
    answer:
      "Project timelines vary based on scope and complexity. A Business Intelligence dashboard might take 4-8 weeks, while a comprehensive data strategy or ML implementation could take 3-6 months. We'll provide a detailed timeline during the initial consultation based on your specific requirements.",
  },
];
---

<FAQSchema faqs={servicesFAQs} />

<BaseLayout
  title="Data Analytics Services | AUXO Data Labs"
  description="Enterprise-grade data analytics services delivered with startup speed. From Business Intelligence to AI solutions—work directly with our senior team for personalized attention."
>
  <PageContainer
    maxWidth="7xl"
    paddingTop="pt-20 sm:pt-24"
    paddingBottom="pb-10 sm:pb-12 md:pb-16"
  >
    <!-- Header -->
    <ServicesHero content={servicesPageContent.hero} />

    <!-- Priority 1: Services Grid -->
    <SectionContainer class="mb-10 sm:mb-12 md:mb-14">
      <div class="max-w-7xl mx-auto px-4 sm:px-6">
        <div class="text-center mb-8 sm:mb-10">
          <h2
            class="text-2xl sm:text-3xl md:text-4xl font-bold mb-3 text-primary transition-colors"
          >
            Our <span class="text-accent-green">Services</span>
          </h2>
          <p
            class="text-base sm:text-lg text-secondary max-w-2xl mx-auto transition-colors"
          >
            Explore our comprehensive data analytics services—each designed to transform your business with actionable insights
          </p>
        </div>
        <ServiceGrid services={services} />
      </div>
    </SectionContainer>

    <!-- Priority 2: Why Our Approach is Different Section -->
    <SectionContainer class="mb-10 sm:mb-12 md:mb-14">
      <div class="max-w-6xl mx-auto px-4 sm:px-6">
        <div class="text-center mb-8">
          <h2
            class="text-2xl sm:text-3xl md:text-4xl font-bold mb-3 text-primary transition-colors"
          >
            Why Our Approach is <span class="text-accent-green">Different</span>
          </h2>
          <p
            class="text-base sm:text-lg text-secondary max-w-2xl mx-auto transition-colors"
          >
            Big consultancies vs. startup agility—here's what you get with AUXO
          </p>
        </div>

        <!-- Comparison Table -->
        <div class="bg-card border-2 border-theme rounded-2xl overflow-hidden">
          <div
            class="grid grid-cols-1 md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-theme"
          >
            <!-- Them (Big Consultancies) -->
            <div class="p-6 sm:p-8">
              <div class="flex items-center gap-3 mb-6">
                <div
                  class="w-12 h-12 bg-surface rounded-lg flex items-center justify-center"
                >
                  <Icon
                    name="mdi:office-building"
                    class="w-6 h-6 text-secondary"
                  />
                </div>
                <h3 class="text-xl font-bold text-primary transition-colors">
                  Big Consultancies
                </h3>
              </div>
              <ul class="space-y-3">
                <li class="flex items-start gap-3">
                  <Icon
                    name="mdi:close"
                    class="w-5 h-5 text-secondary flex-shrink-0 mt-0.5"
                  />
                  <span class="text-sm text-secondary transition-colors"
                    >Slow processes and lengthy timelines</span
                  >
                </li>
                <li class="flex items-start gap-3">
                  <Icon
                    name="mdi:close"
                    class="w-5 h-5 text-secondary flex-shrink-0 mt-0.5"
                  />
                  <span class="text-sm text-secondary transition-colors"
                    >Junior consultants, senior partners rarely involved</span
                  >
                </li>
                <li class="flex items-start gap-3">
                  <Icon
                    name="mdi:close"
                    class="w-5 h-5 text-secondary flex-shrink-0 mt-0.5"
                  />
                  <span class="text-sm text-secondary transition-colors"
                    >High costs with complex pricing structures</span
                  >
                </li>
                <li class="flex items-start gap-3">
                  <Icon
                    name="mdi:close"
                    class="w-5 h-5 text-secondary flex-shrink-0 mt-0.5"
                  />
                  <span class="text-sm text-secondary transition-colors"
                    >Multiple layers of account management</span
                  >
                </li>
              </ul>
            </div>

            <!-- Us (AUXO) -->
            <div class="p-6 sm:p-8 bg-accent-green/5">
              <div class="flex items-center gap-3 mb-6">
                <div
                  class="w-12 h-12 bg-accent-green/20 rounded-lg flex items-center justify-center"
                >
                  <Icon name="mdi:rocket" class="w-6 h-6 text-accent-green" />
                </div>
                <h3 class="text-xl font-bold text-primary transition-colors">
                  AUXO Data Labs
                </h3>
              </div>
              <ul class="space-y-3">
                <li class="flex items-start gap-3">
                  <Icon
                    name="mdi:check-circle"
                    class="w-5 h-5 text-accent-green flex-shrink-0 mt-0.5"
                  />
                  <span class="text-sm text-primary transition-colors"
                    >Fast results and agile implementation</span
                  >
                </li>
                <li class="flex items-start gap-3">
                  <Icon
                    name="mdi:check-circle"
                    class="w-5 h-5 text-accent-green flex-shrink-0 mt-0.5"
                  />
                  <span class="text-sm text-primary transition-colors"
                    >Direct access to founders on every project</span
                  >
                </li>
                <li class="flex items-start gap-3">
                  <Icon
                    name="mdi:check-circle"
                    class="w-5 h-5 text-accent-green flex-shrink-0 mt-0.5"
                  />
                  <span class="text-sm text-primary transition-colors"
                    >Startup-friendly pricing, transparent costs</span
                  >
                </li>
                <li class="flex items-start gap-3">
                  <Icon
                    name="mdi:check-circle"
                    class="w-5 h-5 text-accent-green flex-shrink-0 mt-0.5"
                  />
                  <span class="text-sm text-primary transition-colors"
                    >No bureaucracy, fast decisions</span
                  >
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </SectionContainer>

    <!-- Priority 2: Business Impact Section -->
    <SectionContainer class="mb-10 sm:mb-12 md:mb-14">
      <BusinessImpact
        impacts={allBusinessImpacts}
        title="Business Outcomes You Can Expect"
        subtitle="What our services mean for your business—executive-focused outcomes, not just technical features"
      />
    </SectionContainer>

    <!-- How We Work Section (Concise) -->
    <SectionContainer class="mb-10 sm:mb-12 md:mb-14">
      <div class="max-w-6xl mx-auto px-4 sm:px-6">
        <div class="text-center mb-8">
          <div
            class="inline-block mb-3 px-4 py-2 bg-accent-green/10 border border-accent-green/20 rounded-full"
          >
            <span class="text-accent-green text-sm font-semibold"
              >How We Work</span
            >
          </div>
          <h2
            class="text-2xl sm:text-3xl md:text-4xl font-bold mb-3 text-primary transition-colors"
          >
            {servicesPageContent.process.title}
          </h2>
          <p
            class="text-base sm:text-lg text-secondary max-w-2xl mx-auto transition-colors"
          >
            {servicesPageContent.process.subtitle}
          </p>
        </div>

        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8"
        >
          {
            servicesPageContent.process.steps.map((step, index) => (
              <div
                class="relative group"
              >
                <div class="bg-card border-2 border-accent-green/30 rounded-xl p-6 sm:p-8 hover:border-accent-green pulse-box transition-all duration-300 hover:shadow-xl hover:-translate-y-2 h-full relative overflow-hidden">
                  <!-- Large Number Background -->
                  <div class="absolute top-0 right-0 w-24 h-24 sm:w-28 sm:h-28 flex items-center justify-end pr-4 sm:pr-6 opacity-10 group-hover:opacity-20 transition-opacity">
                    <span class="text-7xl sm:text-8xl font-black text-accent-green leading-none">
                      {step.number}
                    </span>
                  </div>
                  
                  <!-- Title -->
                  <div class="mb-4 text-right">
                    <h3 class="text-xl sm:text-2xl font-bold mb-2 text-primary transition-colors">
                      {step.title}
                    </h3>
                    <div class="w-12 h-1 bg-accent-green rounded-full ml-auto"></div>
                  </div>
                  
                  <!-- Description -->
                  <p class="text-secondary leading-relaxed text-sm sm:text-base transition-colors">
                    {step.description}
                  </p>
                </div>
                {index < servicesPageContent.process.steps.length - 1 && (
                  <div class="hidden lg:block absolute top-1/2 -right-4 w-8 h-0.5 bg-gradient-to-r from-accent-green to-transparent z-10" />
                )}
              </div>
            ))
          }
        </div>
      </div>
    </SectionContainer>

    <!-- CTA Section -->
    <SectionContainer class="mb-8 sm:mb-10">
      <div class="max-w-4xl mx-auto px-4 sm:px-6">
        <div
          class="bg-gradient-to-r from-accent-green/10 to-accent-green/20 border-2 border-accent-green/20 rounded-2xl p-8 md:p-12 text-center transition-colors"
        >
          <h2 class="text-2xl sm:text-3xl font-bold mb-4 text-primary transition-colors">
            {servicesPageContent.cta.title}
          </h2>
          <p
            class="text-secondary mb-8 max-w-2xl mx-auto leading-relaxed transition-colors"
          >
            {servicesPageContent.cta.subtitle}
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a
              href={`${base}${servicesPageContent.cta.primaryCta.href}`}
              class="px-8 py-4 bg-accent-green text-black dark:text-white font-bold rounded-lg hover:bg-accent-green/90 transition-colors inline-flex items-center justify-center hover:shadow-lg hover:shadow-accent-green/30 min-h-[44px] min-w-[44px]"
            >
              {servicesPageContent.cta.primaryCta.text}
              <Icon name="mdi:arrow-right" class="w-5 h-5 ml-2" />
            </a>
            <a
              href={`${base}${servicesPageContent.cta.secondaryCta.href}`}
              class="px-8 py-4 bg-surface text-primary font-bold rounded-lg hover:bg-surface/80 transition-colors inline-flex items-center justify-center min-h-[44px] min-w-[44px] border border-theme"
            >
              {servicesPageContent.cta.secondaryCta.text}
              <Icon name="mdi:calculator" class="w-5 h-5 ml-2" />
            </a>
          </div>
        </div>
      </div>
    </SectionContainer>
  </PageContainer>

</BaseLayout>
