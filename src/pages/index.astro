---
import BaseLayout from "../layouts/BaseLayout.astro";
import Navigation from "../components/common/Navigation.astro";
import { siteData } from "../data/config/site";

// Section Components
import HeroSection from "../components/sections/home/HeroSection.astro";
import MaturityCalculatorSection from "../components/sections/home/MaturityCalculatorSection.astro";
import SectionContainer from "../components/layouts/SectionContainer.astro";
import Button from "../components/ui/Button.astro";
import { Icon } from "astro-icon/components";

// Styles and Scripts
import "../styles/homepage.css";
---

<BaseLayout
  title="Data Analytics Consultancy Dubai, UAE | AUXO Data Labs"
  description={siteData.description}
  showNav={false}
  showParticles={true}
  hideFooterNewsletter={true}
>
  <Navigation />

  <HeroSection />

  <!-- What We Do Section -->
  <SectionContainer id="what-we-do" padding="md">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto text-center">
        <h2
          class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-6 text-primary transition-colors"
        >
          What we do
        </h2>
        <p
          class="text-base sm:text-lg md:text-xl text-secondary mb-8 max-w-3xl mx-auto leading-relaxed transition-colors"
        >
          AUXO Transforms data into decision-grade intelligence through
          Analytics as a Service.
        </p>
        <Button
          variant="primary"
          size="lg"
          href={`${import.meta.env.BASE_URL}contact/`}
          ariaLabel="Get Started"
          class="group"
        >
          <span>Get Started</span>
          <Icon
            name="mdi:arrow-right"
            class="w-5 h-5 sm:w-6 sm:h-6 transition-transform duration-300 group-hover:translate-x-1"
            aria-hidden="true"
          />
        </Button>
      </div>
    </div>
  </SectionContainer>

  <!-- Why AUXO Section -->
  <SectionContainer id="why-auxo" padding="md">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto text-center">
        <h2
          class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-6 text-primary transition-colors"
        >
          Why AUXO
        </h2>
        <p
          class="text-base sm:text-lg md:text-xl text-secondary mb-8 max-w-3xl mx-auto leading-relaxed transition-colors"
        >
          Where business meets data â€” delivering secure, compliant, and trusted
          intelligence that drives confident decisions.
        </p>
        <Button
          variant="outline"
          size="lg"
          href={`${import.meta.env.BASE_URL}services/`}
          ariaLabel="Check our services"
          class="group"
        >
          <span>Check our services</span>
          <Icon
            name="mdi:arrow-right"
            class="w-5 h-5 sm:w-6 sm:h-6 transition-transform duration-300 group-hover:translate-x-1"
            aria-hidden="true"
          />
        </Button>
      </div>
    </div>
  </SectionContainer>

  <MaturityCalculatorSection />

  <script>
    // Setup homepage animations
    function setupHomepageAnimations() {
      // Run hero animation
      function runHeroAnimation() {
        const heroSection = document.getElementById("hero");
        if (!heroSection) return;
        heroSection.classList.remove("hero-animate");
        heroSection.classList.add("hero-animation-reset");
        void heroSection.offsetWidth;
        heroSection.classList.remove("hero-animation-reset");
        heroSection.classList.add("hero-animate");
      }

      // Setup intersection observer
      function setupIntersectionObserver() {
        const prefersReducedMotion = window.matchMedia(
          "(prefers-reduced-motion: reduce)",
        ).matches;

        if (prefersReducedMotion) {
          document.querySelectorAll(".animate-fade-in").forEach((el) => {
            (el as HTMLElement).style.opacity = "1";
          });
          return;
        }

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                const element = entry.target as HTMLElement;
                element.style.opacity = "1";
                const delay = element.getAttribute("data-animation-delay");
                if (delay) {
                  element.style.animationDelay = `${delay}ms`;
                }
                observer.unobserve(element);
              }
            });
          },
          {
            threshold: 0.1,
            rootMargin: "0px 0px -50px 0px",
          },
        );

        document.querySelectorAll(".animate-fade-in").forEach((el) => {
          observer.observe(el);
        });
      }

      runHeroAnimation();
      setupIntersectionObserver();
    }

    // Initialize
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", setupHomepageAnimations);
    } else {
      setupHomepageAnimations();
    }

    document.addEventListener("astro:page-load", setupHomepageAnimations);
  </script>
</BaseLayout>
