# AUXO Data Labs Website: Comprehensive Technical Guide for AI Agents

---

## PART 1: AGENT ONBOARDING & RULES OF ENGAGEMENT

This part contains the most critical information for you, the AI Coding Agent. **You must read and adhere to these guidelines before making any changes to the codebase.**

### 1. Introduction for AI Coding Agents

Welcome, Agent. Your primary directive is to assist in the development and maintenance of the AUXO Data Labs corporate website. This document is your comprehensive guide to the project. It contains the architecture, components, workflows, and the rules you must follow.

This project is a modern, high-performance static site built with Astro. Your goal is to understand its structure and conventions to make safe, efficient, and consistent changes. Adherence to the guidelines in this document is mandatory for all tasks.

### 2. Guidelines for AI Coding Agents

#### Getting Acquainted

Before making any changes, it is mandatory to familiarize yourself with the project by reading the following documents in order:

1.  **`TECHNICAL_DOCUMENTATION.md`** (this file): Your primary source of truth. Provides a deep dive into the project's architecture, components, and workflows.
2.  **`README.md`**: Offers a high-level overview of the project.

#### Core Principles

-   **Static First:** This is a static site generated by Astro. Prioritize static generation and minimize client-side JavaScript wherever possible.
-   **Component-Based Architecture:** The site is built with reusable Astro components found in `src/components/`. Always look for existing components to reuse before creating new ones.
-   **Data-Driven Content:** Most of the site's content is managed in TypeScript files in `src/data/`. When updating content, this should be your first stop.
-   **TypeScript Everywhere:** The project uses TypeScript for type safety. Ensure all new code is strongly typed.
-   **Utility-First CSS:** The project uses Tailwind CSS. Adhere to its utility-first principles and use the existing design tokens defined in `tailwind.config.js` and `src/styles/global.css`.

#### Development Workflow

1.  **Analyze the Request:** Thoroughly understand the user's request and the context of the required changes.
2.  **Formulate a Plan:** Before writing code, formulate a clear plan. Use the information in this documentation to inform your plan.
3.  **Implement Changes:** Implement the changes, following the project's core principles and coding conventions.
4.  **Run Local Checks:** Before proposing changes, ensure the following commands run successfully:
    -   `npm run lint`: Checks for linting errors.
    -   `npm run check`: Performs TypeScript type checking.
    -   `npm run build`: Ensures the site builds successfully.
5.  **Update Documentation:** If your changes affect the project's architecture, add a new component, or modify an existing one, you must update this `TECHNICAL_DOCUMENTATION.md` file accordingly.

#### Ground Rules

1.  **Propose All Changes for Review:** All code modifications, no matter how small, must be proposed for review. Do not attempt to commit directly.
2.  **Update This Documentation:** It is mandatory to update this `TECHNICAL_DOCUMENTATION.md` file whenever you make changes that alter the project's structure, add new features, or modify existing ones. This ensures that the documentation remains a reliable source of truth for the project.
3.  **Adhere to Existing Conventions:** Mimic the style, structure, and patterns of the existing code. Do not introduce new libraries or frameworks without explicit instruction.

#### Commit Message Guidelines

When proposing changes, use the [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) specification for the commit message. The format is:

```
<type>[optional scope]: <description>
```

-   **`type`**: Must be one of `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`.
-   **`description`**: A concise summary of the change in the imperative mood.

#### Code Style & Conventions

-   **Comments:** Add comments only when necessary to explain *why* a piece of code is written a certain way, not *what* it does. Avoid obvious comments.
-   **Naming Conventions:**
    -   Components: `PascalCase` (e.g., `MyComponent.astro`)
    -   Variables and functions: `camelCase` (e.g., `myVariable`, `myFunction`)
    -   TypeScript interfaces: `PascalCase` (e.g., `MyInterface`)
-   **Imports:** Keep imports organized at the top of the file, grouped as follows:
    1.  Astro imports
    2.  Third-party library imports
    3.  Internal component imports
    4.  Data imports
    5.  Type imports
-   **Tailwind CSS:** While there is no strict linter for class order, try to follow a consistent pattern (e.g., layout, spacing, typography, colors, effects).

#### Dos and Don’ts (Best Practices)

-   **DO** use the data files in `src/data/` to manage content. This is the primary way to update text, links, and other data on the site.
-   **DO** reuse existing components from `src/components/` whenever possible.
-   **DO** ensure all new components and pages are accessible (a11y) by using semantic HTML and ARIA attributes where necessary. The ESLint configuration will help with this.
-   **DO** use Astro's `getCollection` API to query blog posts from `src/content/blog/`.
-   **DON'T** hard-code strings directly into components or pages. If the text is likely to change, add it to the appropriate file in `src/data/`.
-   **DON'T** duplicate code. If you find yourself writing the same code in multiple places, create a reusable component.
-   **DON'T** add large client-side JavaScript libraries without a very strong justification. This is a static-first site, and performance is a key priority.
-   **DON'T** use `<a>` tags for internal navigation without using the `base` variable. All internal links should be relative to the base URL (e.g., `<a href={base}>Home</a>`).

#### Common "Gotchas" to Avoid

-   **Client-side Scripts:** Remember that Astro components are server-only by default. If you need to add client-side interactivity, you must use a `<script>` tag within the `.astro` file. The existing interactive components like `MultiStepForm.astro` and `MaturityCalculator.astro` are good examples of this pattern.
-   **API Endpoints are Placeholders:** The API endpoints in `src/pages/api/` are not connected to any backend services. Do not assume they are functional. Any work on them will require implementing the actual email/database integration.
-   **Base URL:** The project is configured with a `base` URL in `astro.config.mjs`. All internal links and asset paths must be prefixed with the `base` variable to work correctly in both development and production. **Critical:** API calls in client-side scripts must also use the base URL.
-   **Image Optimization:** While Astro's image optimization is powerful, be mindful of the image formats and sizes you use. Large, unoptimized images can still slow down the site.
-   **ESLint Version Mismatch:** The project currently uses ESLint v9 with a deprecated v8 config format. The lint command will not work until migrated to flat config or ESLint is downgraded.

---

## PART 2: THE BIG PICTURE: ARCHITECTURE & DESIGN

This part covers the high-level overview of the project, including its structure and visual identity.

### 3. Detailed Project Architecture

This section provides a file-level overview of the project structure to prevent the creation of unnecessary or misplaced files.

-   **`/` (Root)**
    -   `astro.config.mjs`: Main Astro configuration file. Controls integrations like Tailwind, MDX, and sitemaps.
    -   `tailwind.config.js`: Configuration for the Tailwind CSS framework.
    -   `tsconfig.json`: TypeScript configuration.
    -   `.eslintrc.cjs`: ESLint configuration for code quality and style.
-   **`src/`**: Contains all source code.
    -   **`components/`**: Reusable Astro components.
        -   `Navigation.astro`, `Footer.astro`: The main site header and footer.
        -   `MultiStepForm.astro`, `MaturityCalculator.astro`: Large, interactive components with client-side scripts.
        -   `SEO.astro`, `Breadcrumbs.astro`, `FAQSchema.astro`: SEO and structured data components.
        -   `CookieConsent.astro`: The GDPR/PDPL compliant cookie banner.
        -   `DevBar.astro`: A development-only toolbar for debugging.
    -   **`content/`**: Manages content collections via Astro's API.
        -   `config.ts`: Defines the schema for all content collections (currently only `blog`).
        -   `blog/`: Contains the individual blog post files in MDX format.
    -   **`data/`**: Centralized TypeScript files for site-wide data.
        -   `site.ts`: Global site information (name, contact details).
        -   `services.ts`: Data for the services pages.
        -   `team.ts`: Data for the team members section.
        -   `faq.ts`: Data for the FAQ page.
    -   **`layouts/`**: Defines the main page structure.
        -   `BaseLayout.astro`: The primary layout, including the `<head>`, `<body>`, and slots for page content. It imports the `Navigation`, `Footer`, and `SEO` components.
        -   `LegalLayout.astro`: A specific layout for legal pages like the privacy policy.
    -   **`pages/`**: Represents the site's routes.
        -   `index.astro`: The homepage.
        -   `about.astro`, `contact.astro`, `faq.astro`: Standard static pages.
        -   `blog/index.astro`, `blog/[slug].astro`: The blog listing page and the dynamic template for individual blog posts.
        -   `services/index.astro`, `services/[id].astro`: The services listing page and the dynamic template for individual service pages.
        -   `api/contact.ts`, `api/newsletter.ts`: Server-side API endpoints.
    -   **`styles/`**: Contains global CSS.
        -   `global.css`: Defines global styles, CSS variables for the color palette, and custom animations.
-   **`public/`**: Stores static assets that are copied directly to the build output.
    -   `robots.txt`, `favicon.svg`, `logo.svg`, `brochure.pdf`, etc.
-   **`.github/workflows/`**: Contains CI/CD workflows.
    -   `deploy.yml`: Deploys the `master` branch to GitHub Pages (Production).
    -   `deploy-staging.yml`: Deploys `develop` and `staging` branches to Netlify (Staging).

### 4. Branding and Design Guidelines

This section outlines the visual identity of the AUXO Data Labs website.

#### Logo

-   **Design:** The logo is a distinctive 2x2 grid featuring the letters A-U-X-O.
-   **Location:** `public/logo.svg`

#### Color Palette

-   **Source:** The color scheme is defined as CSS variables in `src/styles/global.css`.
-   **Compliance:** The palette is designed for high contrast and readability (WCAG AA/AAA compliant).

| Role                 | Variable Name        | Hex Code  | Usage                               |
|----------------------|----------------------|-----------|-------------------------------------|
| **Primary Accent**   | `--accent-green`     | `#A3E635` | CTAs, links, highlights, icons      |
| **Background**       | `--bg-primary`       | `#000000` | Main page background                |
| **Primary Text**     | `--text-primary`     | `#FFFFFF` | Main body text                      |
| **Secondary Text**   | `--text-secondary`   | `#A0A0A` | Subheadings, less important text    |

#### Typography

-   **Source:** Fonts are defined in `src/styles/global.css` and loaded from Google Fonts in `src/components/SEO.astro`.
-   **Brand/Logo:** `Montserrat` (Weight: 900)
-   **Headings:** `Space Grotesk` (Weights: 600, 700, 800)
-   **Body:** `Inter` (Weights: 400, 500, 600, 700)

#### Iconography

-   **Primary Library:** The project uses [Material Design Icons](https://materialdesignicons.com/) via the `astro-icon` integration for most UI icons.
-   **Technology Icons:** The homepage technology section uses [Simple Icons Font](https://github.com/simple-icons/simple-icons-font) loaded via CDN for brand/technology logos.
-   **Configuration:** The list of included MDI icons is managed in `astro.config.mjs` to optimize bundle size.
-   **Important:** Simple Icons CDN stylesheet must be included in pages that use technology icons (currently: `index.astro`).

---

## PART 3: THE BUILDING BLOCKS: COMPONENTS & DATA

This part is a detailed reference for the project's reusable components and data structures.

### 5. Detailed Component Reference

#### `SEO.astro`

-   **Location:** `src/components/SEO.astro`
-   **Purpose:** Manages all SEO-related meta tags and structured data for a given page.
-   **Props:**

| Prop           | Type         | Default                                                                                             |
|----------------|--------------|-----------------------------------------------------------------------------------------------------|
| `title`        | `string`     | `AUXO Data Labs | Dubai Analytics Consultancy`                                                         |
| `description`  | `string`     | `Leading analytics consultancy in Dubai, UAE...`                                                    |

#### `Breadcrumbs.astro`

-   **Location:** `src/components/Breadcrumbs.astro`
-   **Purpose:** Renders breadcrumb navigation and the corresponding `BreadcrumbList` structured data.
-   **Props:**

| Prop    | Type                          | Default     |
|---------|-------------------------------|-------------|
| `items` | `BreadcrumbItem[]`            | `[]`        |

-   **`BreadcrumbItem` Interface:**

    ```typescript
    export interface BreadcrumbItem {
      label: string;
      href?: string;
    }
    ```

### 6. Code Walkthrough: Maturity Calculator

-   **Location:** `src/pages/maturity-calculator.astro`

This section provides a detailed walkthrough of the calculator's client-side script.

#### State Management

The calculator's state is managed by two simple variables:

-   `currentQuestion`: A number that tracks the index of the current question being displayed.
-   `answers`: An array of numbers that stores the user's selected score for each question.

#### Core Logic

1.  **Initialization:** The script waits for the user to click the "Start Assessment" button, then calls `showQuestion(0)`.
2.  **`showQuestion(index)`:** This function renders the question, category, and answer options. It attaches a click listener to each answer button that calls `selectAnswer(score)`.
3.  **`selectAnswer(score)`:** This function stores the selected score in the `answers` array and enables the "Next" button.
4.  **`showResults()`:** After the last question, this function calculates and displays the overall score, dimension scores, and personalized recommendations based on the `answers` array.

### 7. Content Schemas & Data Structures

#### Blog Collection Schema

-   **File:** `src/content/config.ts`
-   **Collection:** `blog`
-   **Schema (Zod):**

| Field         | Type         | Required | Default |
|---------------|--------------|----------|---------|
| `title`       | `string`     | Yes      |         |
| `description` | `string`     | Yes      |         |
| `publishDate` | `date`       | Yes      |         |

#### Services Data Structure

-   **File:** `src/data/services.ts`
-   **Structure:** An array of objects, where each object represents a service.

```typescript
export const services = [
  {
    id: string,
    title: string,
    description: string,
    icon: string, // mdi:icon-name
    features: string[],
    deliverables: string[],
  },
  // ...
];
```

---

## PART 4: THE MECHANICS: WORKFLOWS & INTEGRATIONS

This part covers the "how-to" aspects of the project.

### 8. Content Management Workflow

#### Adding a New Blog Post

1.  Create a new `.md` or `.mdx` file in `src/content/blog/`.
2.  Add the required frontmatter, following the schema in `src/content/config.ts`.

#### Adding or Modifying a Service

1.  Open `src/data/services.ts`.
2.  Add or edit an object in the `services` array.

### 9. API Endpoints & Data Flow

The project includes two placeholder API endpoints in `src/pages/api/`.

#### `/api/contact`

-   **Purpose:** Handles submissions from the multi-step contact form.
-   **Data Flow:** `MultiStepForm.astro` -> `POST /api/contact` -> `contact.ts` -> (TODO: Email Service)

#### `/api/newsletter`

-   **Purpose:** Handles submissions from the newsletter signup form.
-   **Data Flow:** `Footer.astro` -> `POST /api/newsletter` -> `newsletter.ts` -> (TODO: Email Marketing Platform)

### 10. Deployment Workflow

The project uses GitHub Actions for CI/CD, located in `.github/workflows/`.

-   **Production (`deploy.yml`):** Pushing to the `master` branch deploys to **GitHub Pages**.
-   **Staging (`deploy-staging.yml`):** Pushing to `develop` or `staging` branches deploys to **Netlify**.

### 11. SEO & Structured Data

-   **`SEO.astro` Component:** The central hub for all SEO-related settings.
-   **Structured Data:** The site uses JSON-LD for `Organization`, `LocalBusiness`, `WebSite`, `BlogPosting`, `BreadcrumbList`, and `FAQPage` schemas.
-   **`robots.txt`**: Located in `public/`, it allows all crawlers except for the `/api/` directory.

### 12. Development & Tooling

-   **ESLint:** The configuration in `.eslintrc.cjs` enforces Astro best practices and accessibility standards.
-   **`DevBar.astro`:** A development-only toolbar with tools for debugging, accessibility testing, and cache clearing.

### 13. Environment Variables

-   **Source:** The `.env.example` file provides a template for all required variables.
-   **Key Variables:** `PUBLIC_SITE_URL`, `PUBLIC_GOOGLE_ANALYTICS_ID`, `MAILCHIMP_API_KEY`, `SENDGRID_API_KEY`.

---

## PART 5: KNOWN ISSUES & CURRENT STATUS

This section documents the current state of the project and known issues that need to be addressed.

### 14. Critical Issues - RESOLVED ✅

#### 14.1 ESLint Configuration Not Working - ✅ FIXED
-   **Status:** Fixed (November 1, 2025)
-   **Resolution:** Migrated to ESLint v9 flat config format (`eslint.config.js`)
-   **Changes:**
    - Installed ESLint v9 and required plugins
    - Created new `eslint.config.js` with flat config format
    - Removed deprecated `.eslintrc.cjs`

#### 14.2 Missing Dependencies - ✅ FIXED
-   **Status:** Fixed (November 1, 2025)
-   **Resolution:** Installed all missing dependencies
-   **Changes:**
    - Installed `@astrojs/check` and `typescript` for type checking
    - Installed `zod` for form validation
    - All npm scripts now work correctly

#### 14.3 Simple Icons CDN Not Loaded - ✅ FIXED
-   **Status:** Fixed (November 1, 2025)
-   **Location:** `src/components/SEO.astro`
-   **Resolution:** Added Simple Icons CDN stylesheet to SEO component
-   **Impact:** All 32 technology brand icons now display correctly on homepage

#### 14.4 API Endpoints Non-Functional - ⚠️ PARTIALLY ADDRESSED
-   **Status:** Secured but still placeholder
-   **Location:** `src/pages/api/contact.ts`, `src/pages/api/newsletter.ts`
-   **Changes Made:**
    - ✅ Implemented Zod validation for all inputs
    - ✅ Added rate limiting protection
    - ✅ Fixed base URL bugs for production deployment
    - ✅ Added proper error handling
    - ⏳ Still TODO: Integrate with actual email service
-   **Current Behavior:** Forms validate and rate-limit correctly but don't send emails
-   **Action Required:** Integrate with email service (SendGrid, AWS SES, etc.)

### 15. High Priority Issues - RESOLVED ✅

#### 15.1 Newsletter API Base URL Bug - ✅ FIXED
-   **Status:** Fixed (November 1, 2025)
-   **Location:** `src/components/Footer.astro:211`, `src/components/MultiStepForm.astro:464`
-   **Resolution:** Updated all fetch calls to use `${import.meta.env.BASE_URL}api/...`
-   **Impact:** Forms now work correctly in both development and production

#### 15.2 Missing Input Validation - ✅ FIXED
-   **Status:** Fixed (November 1, 2025)
-   **Location:** `src/utils/validation.ts` (new file)
-   **Resolution:**
    - Implemented comprehensive Zod validation schemas
    - Created `contactFormSchema` and `newsletterSchema`
    - Integrated validation into both API endpoints
    - Added honeypot field for spam detection
-   **Impact:** Forms now properly validate all inputs and reject malicious data

#### 15.3 No Rate Limiting - ✅ FIXED
-   **Status:** Fixed (November 1, 2025)
-   **Location:** `src/utils/rateLimit.ts` (new file)
-   **Resolution:**
    - Created in-memory rate limiter with configurable presets
    - Integrated into contact and newsletter API endpoints
    - Contact form: 3 requests per 30 minutes
    - Newsletter: 2 requests per hour
    - Proper HTTP 429 responses with Retry-After headers
-   **Impact:** Protected against spam and DoS attacks

#### 15.4 Placeholder Contact Information - ✅ FIXED
-   **Status:** Fixed (November 1, 2025)
-   **Location:** `src/data/site.ts:7`, `src/components/Footer.astro:30`
-   **Resolution:**
    - Set phone to `null` in site data
    - Added conditional rendering in Footer component
    - Phone field only displays when actual number is available
-   **Impact:** Removes unprofessional placeholder from website

### 16. Medium Priority Issues

#### 16.1 No Blog Content
-   **Status:** Incomplete
-   **Location:** `src/content/blog/`
-   **Issue:** Blog pages exist but no posts published
-   **Impact:** Empty blog page, broken links from homepage
-   **Action Required:** Create initial blog posts or hide blog links

#### 16.2 Console Logs in Production - ✅ FIXED
-   **Status:** Fixed (November 1, 2025)
-   **Location:** `src/pages/api/contact.ts`, `src/pages/api/newsletter.ts`
-   **Resolution:** Wrapped all console.log statements with `if (import.meta.env.DEV)` checks
-   **Impact:** No sensitive data exposed in production, console.error for actual errors retained

#### 16.3 Missing Security Headers - ✅ FIXED
-   **Status:** Fixed (November 1, 2025)
-   **Location:** `public/_headers` (new file)
-   **Resolution:**
    - Created Netlify headers configuration
    - Added CSP, X-Frame-Options, X-Content-Type-Options, HSTS
    - Configured appropriate caching for static assets
    - Added CORS headers for API endpoints
-   **Impact:** Significantly improved security posture against XSS, clickjacking, and other attacks

### 17. Optimization Opportunities

-   **Image Optimization:** Not using Astro's `<Image />` component consistently
-   **Font Loading:** Could add `&display=swap` to Google Fonts URL
-   **Lazy Loading:** Implement Intersection Observer for below-fold content
-   **CSS Audit:** Verify all custom CSS classes are used, remove unused
-   **Type Consolidation:** Create shared `types/` directory for common interfaces

### 18. Documentation Gaps

-   **Environment Variables:** `.env.example` needs verification of all required variables
-   **Component Documentation:** Some complex components lack inline documentation
-   **Setup Instructions:** README could include troubleshooting section

### 19. Testing & Quality Assurance

-   **No Unit Tests:** Project has no test suite
-   **No E2E Tests:** No automated testing of user flows
-   **No CI Checks:** GitHub Actions only run deployment, not quality checks
-   **Manual Testing Required:** All features need manual verification

For a detailed breakdown of all issues with severity ratings, timelines, and specific fixes, see [`AUDIT_FINDINGS.md`](./AUDIT_FINDINGS.md).

---

## APPENDIX: Quick Reference

### File Locations Quick Reference
-   **Homepage:** `src/pages/index.astro`
-   **Navigation:** `src/components/Navigation.astro`
-   **Footer:** `src/components/Footer.astro`
-   **SEO:** `src/components/SEO.astro`
-   **Base Layout:** `src/layouts/BaseLayout.astro`
-   **Site Data:** `src/data/site.ts`
-   **Services Data:** `src/data/services.ts`
-   **Global Styles:** `src/styles/global.css`
-   **Astro Config:** `astro.config.mjs`
-   **Tailwind Config:** `tailwind.config.js`
-   **TypeScript Config:** `tsconfig.json`

### Common Commands
```bash
npm run dev          # Start development server
npm run build        # Build for production
npm run preview      # Preview production build
npm run lint         # Run ESLint (currently broken)
npm run lint:fix     # Auto-fix linting issues (currently broken)
npm run check        # Type check (requires missing dependencies)
```

### Base URL Usage
```astro
---
const base = import.meta.env.BASE_URL;
---
<a href={`${base}about`}>About</a>
<img src={`${base}logo.svg`} />
<script>
  fetch(`${import.meta.env.BASE_URL}api/contact`, { ... });
</script>
```

---

**Last Updated:** 2025-11-01
**Document Version:** 2.1
**Project Status:** Active Development
**Recent Updates:** Fixed all critical and high-priority security issues from audit
